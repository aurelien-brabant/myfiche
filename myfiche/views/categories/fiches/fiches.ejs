<%- include("../../partials/header") %>

<!-- Main container -->
<div class="container-fluid px-0 d-flex flex-column align-items-center" id="fichesContainer">

  <!-- Jumbotron header -->

  <div class="jumbotron text-center pb-1 m-0">

    <span>
      <h1>
        <i class="fas fa-scroll mx-3 mx-lg-5"></i>Fiches<i class="fas fa-scroll mx-3 mx-lg-5"></i>
      </h1>
    </span>

    <h2>
      Toutes les fiches sur "<%=category.title%>"
    </h2>

    <div class="active-cyan-4 d-flex justify-content-center w-100 my-3">
      <input class="form-control w-25 searchEngineInputField" type="text" placeholder="Rechercher" id="searchInput">
    </div>

    <a href="/categories">
      <i class="fas fa-undo mr-2"></i>Retourner à la liste des catégories
    </a>

    <p class="p-3 mt-5">
      <i class="fas fa-question mr-2"></i>Vous ne trouvez pas ce que vous recherchez ? <a href="#">Pourquoi ne pas nous aider ?</a>
    </p>

    <!-- End of jumbotron  -->

  </div>

  <!-- Cards container -->

  <div class="row d-flex p-4 w-100">

    <% fiches.forEach(function(fiche){ 
      if (!fiche.visibility.hidden) {
        %>

        <!-- Cards -->
        <div class="col-12 col-sm-6 col-lg-4 mt-5 col-xl-3 justify-content-center searchEngineTargetBlock">

          <div class="card col-11 px-0 searchEngineTargetBlock" style="width: 18rem;" id="ficheCard">

            <img src="<%= fiche.publishedContent.image %>" class="card-img-top" alt="..." style="max-height:200px">

            <div class="card-body text-center px-3 d-flex flex-column justify-content-center">

              <div class="row justify-content-center" id="fichesBadges">

                <span class="badge badge-warning mr-1 p-2 px-3 mb-3">
                  <i class="fas fa-star"></i> -230%
                </span>

                <span class="badge badge-danger mr-2 py-2 px-3 mb-3">
                  <i class="fas fa-flag"></i>
                </span>

              </div>

              <h5 class="card-title searchEngineTargetField"><%= fiche.publishedContent.title %></h5>

              <p>Par <em class="searchEngineTargetField"><%= fiche.author.username %></em></p>

              <p class="card-text">
                <%= fiche.publishedContent.description %> 
              </p>

              <a href="/categories/<%=category._id%>/fiches/<%=fiche._id%>" class="btn btn-primary px-5">
                Voir
              </a>

            </div>

          </div>

          <!-- End of cards -->

        </div>

        <% }}) %>

      </div> 

      <!-- End of cards container -->

    </div>


  <!-- End of container -->

  <%- include("../../partials/scripts") %>
  <script src="/myfiche_assets/js/plugins/searchEngine.js"></script>
  <%- include("../../partials/footer") %>
